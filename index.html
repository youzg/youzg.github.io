<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>youzg</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="唯刀百辟 唯心不易">
<meta property="og:type" content="website">
<meta property="og:title" content="youzg">
<meta property="og:url" content="http://youzg.cc/index.html">
<meta property="og:site_name" content="youzg">
<meta property="og:description" content="唯刀百辟 唯心不易">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="youzg">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="youzg" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.4.0"><link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">youzg</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://youzg.cc"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-2020-algorithms01" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/11/19/2020-algorithms01/" class="article-date">
  <time datetime="2020-11-18T16:00:00.000Z" itemprop="datePublished">2020-11-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E7%AE%97%E6%B3%95/">算法</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/11/19/2020-algorithms01/">数据结构和算法[1]</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h3><p>算法是用于解决特定问题的一系列的执行步骤</p>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">//计算从0到n的和</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">sum1</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            sum <span class="token operator">+=</span> i<span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> sum<span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">sum2</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> n<span class="token punctuation">)</span> <span class="token operator">*</span> n <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre>
<h3 id="如何判断一个算法的好坏"><a href="#如何判断一个算法的好坏" class="headerlink" title="如何判断一个算法的好坏"></a>如何判断一个算法的好坏</h3><ul>
<li>正确性、可读性、健壮性</li>
<li>时间复杂度 估算程序指令的执行次数 执行时间</li>
<li>空间复杂度    估算所需占用的存储空间</li>
</ul>
<h3 id="大O表示法（Big-O）"><a href="#大O表示法（Big-O）" class="headerlink" title="大O表示法（Big O）"></a>大O表示法（Big O）</h3><ul>
<li><p>一般用大O表示法来描述复杂度，它表示的是数据规模n对应的复杂度</p>
</li>
<li><p>忽略常数、系数、低阶</p>
<blockquote>
<p>9 &gt;&gt; O(1)<br>2n + 3 &gt;&gt; O(n)<br>n^2 + 2n + 6 &gt;&gt; O(n^2)<br>4n^3 + 3n^2 + 2n + 6 &gt;&gt; O(n^3)</p>
</blockquote>
</li>
<li><p>大O表示法仅仅是一种粗略的分析模型，是一种估算，能帮我们短时间内了解一个算法的执行效率</p>
</li>
</ul>
<h4 id="对数的细节"><a href="#对数的细节" class="headerlink" title="对数的细节"></a>对数的细节</h4><ul>
<li>对数阶一般省略底数</li>
</ul>
<blockquote>
<p>log2(n) = log2(9) * log9(n)</p>
</blockquote>
<ul>
<li>所以log2(n)、log9(n)统称为logn</li>
</ul>
<h3 id="常见的复杂度"><a href="#常见的复杂度" class="headerlink" title="常见的复杂度"></a>常见的复杂度</h3><blockquote>
<p>O(1)&lt;O(logn)&lt;O(n)&lt;O(nlogn)&lt;O(n^2)&lt;O(n^3)&lt;O(2^n)&lt;O(n!)&lt;O(n^n)</p>
</blockquote>
<h3 id="什么是数据结构"><a href="#什么是数据结构" class="headerlink" title="什么是数据结构"></a>什么是数据结构</h3><p>数据结构就是计算机存储、组织结构的方式</p>
<ul>
<li>线性结构 （线性表，数组、链表、栈、队列、哈希表）</li>
<li>树形结构 （二叉树、AVL数、红黑树、B树、堆、Trie、哈夫曼树、并查集）</li>
<li>图形结构 （邻接矩阵、邻接表）</li>
</ul>
<h3 id="线性表"><a href="#线性表" class="headerlink" title="线性表"></a>线性表</h3><p>线性表是具有n个相同类型元素的有限序列（n &gt;= 0）</p>
<ul>
<li>数组：是一种顺序村塾的线性表，所有元素的内存地址是连续的<ul>
<li>在很多编程语言中，数组无法动态修改容量</li>
</ul>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://youzg.cc/2020/11/19/2020-algorithms01/" data-id="ckxg0kmsi0003jqsmf897bbgt" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="tag">数据结构</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">算法</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2020-arm" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/11/13/2020-arm/" class="article-date">
  <time datetime="2020-11-12T16:00:00.000Z" itemprop="datePublished">2020-11-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%9D%82%E8%B0%88/">杂谈</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/11/13/2020-arm/">由M1看ARM架构</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>最近苹果Mac发布会发布了自研ARM架构的桌面处理器M1，目的在与打通移动端和PC使其直接兼容。</p>
<h3 id="ARM架构"><a href="#ARM架构" class="headerlink" title="ARM架构"></a>ARM架构</h3><p>进阶精简指令集机器(Advanced RISC Machine)，是32位精简指令集(RISC)处理器架构，广泛地使用在许多嵌入式系统设计<br>优点：适合移动通讯领域，低功耗<br>目前ARM家族占据了32位嵌入式处理器75%的比例</p>
<h3 id="ARM处理器指令集"><a href="#ARM处理器指令集" class="headerlink" title="ARM处理器指令集"></a>ARM处理器指令集</h3><p>ARM指令集是指计算机ARM操作指令系统。在ARM中有两种方式可以实现程序的跳转：一种是跳转指令；另一种是直接向PC寄存器（R15）中写入目标地址值</p>
<p>ARMV6、ARMV7、ARMV7s、ARM64、ARM64E都是</p>
<h3 id="ARM架构图"><a href="#ARM架构图" class="headerlink" title="ARM架构图"></a>ARM架构图</h3><p>下图所示的是ARM构架图。它由32位ALU、若干个32位通用寄存器以及状态寄存器、32&TImes;8位乘法器、32&TImes;32位桶形移位寄存器、指令译码以及控制逻辑、指令流水线和数据/地址寄存器组成。<br>　　1、ALU：它有两个操作数锁存器、加法器、逻辑功能、结果以及零检测逻辑构成。<br>　　2、桶形移位寄存器：ARM采用了32&TImes;32位的桶形移位寄存器，这样可以使在左移/右移n位、环移n位和算术右移n位等都可以一次完成。<br>　　3、高速乘法器：乘法器一般采用“加一移位”的方法来实现乘法。ARM为了提高运算速度，则采用两位乘法的方法，根据乘数的2位来实现“加一移位”运算;ARM高速乘法器采用32&TImes;8位的结构，这样，可以降低集成度（其相应芯片面积不到并行乘法器的1/3）。<br>　　4、浮点部件：浮点部件是作为选件供ARM构架使用。FPA10浮点加速器是作为协处理方式与ARM相连，并通过协处理指令的解释来执行。<br>　　5、控制器：ARM的控制器采用的是硬接线的可编程逻辑阵列PLA。<br>　　6、寄存器</p>
<p><img src="https://tva1.sinaimg.cn/large/0081Kckwgy1gknisbp4qqj30et0fkt98.jpg" alt=""></p>
<h3 id="x86架构"><a href="#x86架构" class="headerlink" title="x86架构"></a>x86架构</h3><p>目前的PC架构绝大多数都是Intel的X86架构，貌似也是因为INTEL的这个X86架构早就了目前INTEL如日中天的地位。X86架构（The X86 architecture）是微处理器执行的计算机语言指令集，指一个intel通用计算机系列的标准编号缩写，也标识一套通用的计算机指令集合。</p>
<p><img src="https://tva1.sinaimg.cn/large/0081Kckwgy1gknjk3btmej30g40ae3z7.jpg" alt=""></p>
<p>当然，这个架构图并不是所有的都是如此，根据不同的主板，平台，架构是略有差别的比如说，目前很多主板已经将北桥集成到CPU当中，将南桥集成为PCH，但大致的框架还是如此的。下面对这个架构图上的各个内容分别进行一些简介。<br>　　1：CPU，大家都不陌生的名词，中央处理器，计算机的核心大脑。<br>　　2： 北桥（North Bridge Chipset）：北桥是电脑主板上的一块芯片，位于CPU插座边，起连接作用。<br>　　3：南桥芯片（South Bridge）是主板芯片组的重要组成部分，一般位于主板上离CPU插槽较远的下方，PCI插槽的附近，这种布局是考虑到它所连接的I/O总线较多，离处理器远一点有利于布线。<br>　　4： 内存是计算机中重要的部件之一，它是与CPU进行沟通的桥梁。计算机中所有程序的运行都是在内存中进行的，因此内存的性能对计算机的影响非常大。<br>　　5：显卡（Video card，Graphics card）全称显示接口卡，又称显示适配器，是计算机最基本配置、最重要的配件之一。<br>　　6：显示j接口<br>　　7：网卡是工作在链路层的网络组件，是局域网中连接计算机和传输介质的接口，不仅能实现与局域网传输介质之间的物理连接和电信号匹配，还涉及帧的发送与接收、帧的封装与拆封、介质访问控制、数据的编码与解码以及数据缓存的功能等。<br>　　8：声卡的基本功能是把来自话筒、磁带、光盘的原始声音信号加以转换，输出到耳机、扬声器、扩音机、录音机等声响设备，或通过音乐设备数字接口（MIDI）使乐器发出美妙的声音。<br>　　9：SATA（Serial Advanced Technology Attachment，串行高级技术附件）是一种基于行业标准的串行硬件驱动器接口，是由Intel、IBM、Dell、APT、Maxtor和Seagate公司共同提出的硬盘接口规范。<br>　　10：硬盘是电脑主要的存储媒介之一，由一个或者多个铝制或者玻璃制的碟片组成。碟片外覆盖有铁磁性材料。<br>　　11：总线</p>
<h3 id="RISC-V"><a href="#RISC-V" class="headerlink" title="RISC-V"></a>RISC-V</h3><p>基于<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/w/index.php?title=精简指令集&action=edit&redlink=1">精简指令集</a>（RISC）原则的<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/开源标准">开源</a><a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/指令集架構">指令集架构</a>（ISA），且开源免费。RISC-V指令集的设计考虑了小型、快速、低功耗</p>
<p><img src="https://tva1.sinaimg.cn/large/0081Kckwgy1gknlm3z563j30n40jbdho.jpg" alt=""></p>
<h3 id="ARM、x86架构、RISC-V"><a href="#ARM、x86架构、RISC-V" class="headerlink" title="ARM、x86架构、RISC-V"></a>ARM、x86架构、RISC-V</h3><p>ARM在2011年底发布ARMV8为首款64位处理器，18年底开始Windows已开始支持64位ARM应用开发和提交，所以x86 比 ARM 功耗高如今已经不再成立,如Atom。同时RISC-V的出现(CISC强调运算性能，专注桌面电脑、服务器和超算市场。RISC的代表为ARM，而CISC的代表则是我们耳熟能详的x86，而RISC-V是RISC的升级版)，由于没有历史包袱可以规避很多计算机体系结构中存在的漏洞，免费开源。并且，随着RISC-V开源架构吸引IBM、恩智浦、Western Digital、NVIDIA、Qualcomm、三星、Google、华为、Rambus、美高森美、Marvell、联发科、SK hynix、Seagate、CEVA、阿里巴巴、Allwinner、猎户星空，以及加州大学伯克利分校、麻省理工学院、普林斯顿大学、苏黎世联邦理工学院、印度理工学院、罗伦兹国家实验室、新加坡南洋理工大学及中国中科院计算所等学术机构，现阶段已经可以执行64位运算模式，并且在运算效能、功耗等方面均有一定优势，部分硬件设计也使用该架构，软件也陆续加入JVM、LLVM、Python等常见开发工具。</p>
<h5 id="来源："><a href="#来源：" class="headerlink" title="来源："></a>来源：</h5><p><a target="_blank" rel="noopener" href="https://www.myoschain.com/blog/138175366417088512">ARM vs x86 vs RISC-V，未来属于谁？</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/95028674">一文看懂arm架构和x86架构有什么区别</a></p>
<p><a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/RISC-V">RISC-V</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://youzg.cc/2020/11/13/2020-arm/" data-id="ckxg0kmsm0007jqsm29omcdxo" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ARM/" rel="tag">ARM</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CPU/" rel="tag">CPU</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2020-regex-list" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/08/20/2020-regex-list/" class="article-date">
  <time datetime="2020-08-19T16:00:00.000Z" itemprop="datePublished">2020-08-20</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/CS/">CS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/08/20/2020-regex-list/">正则表达式速查表</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>正则表达式</p>
<table>
<thead>
<tr>
<th align="left">字符</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>\</code></td>
<td align="left">将下一个字符标记为一个特殊字符（File Format Escape，清单见本表）、或一个原义字符（Identity Escape，有^$()*+?.[{|共计12个)、或一个向后引用（backreferences）、或一个八进制转义符。例如，“<code>n</code>”匹配字符“<code>n</code>”。“<code>\n</code>”匹配一个换行符。序列“<code>\\</code>”匹配“<code>\</code>”而“<code>\(</code>”则匹配“<code>(</code>”。</td>
</tr>
<tr>
<td align="left"><code>^</code></td>
<td align="left">匹配输入字符串的开始位置。如果设置了RegExp对象的Multiline属性，^也匹配“<code>\n</code>”或“<code>\r</code>”之后的位置。</td>
</tr>
<tr>
<td align="left"><code>$</code></td>
<td align="left">匹配输入字符串的结束位置。如果设置了RegExp对象的Multiline属性，$也匹配“<code>\n</code>”或“<code>\r</code>”之前的位置。</td>
</tr>
<tr>
<td align="left"><code>*</code></td>
<td align="left">匹配前面的子表达式零次或多次。例如，zo<em>能匹配“<code>z</code>”、“<code>zo</code>”以及“<code>zoo</code>”。</em>等价于{0,}。</td>
</tr>
<tr>
<td align="left"><code>+</code></td>
<td align="left">匹配前面的子表达式一次或多次。例如，“<code>zo+</code>”能匹配“<code>zo</code>”以及“<code>zoo</code>”，但不能匹配“<code>z</code>”。+等价于{1,}。</td>
</tr>
<tr>
<td align="left"><code>?</code></td>
<td align="left">匹配前面的子表达式零次或一次。例如，“<code>do(es)?</code>”可以匹配“<code>do</code>”或“<code>does</code>”中的“<code>do</code>”。?等价于{0,1}。</td>
</tr>
<tr>
<td align="left"><code>&#123;n&#125;</code></td>
<td align="left">n是一个非负整数。匹配确定的n次。例如，“<code>o&#123;2&#125;</code>”不能匹配“<code>Bob</code>”中的“<code>o</code>”，但是能匹配“<code>food</code>”中的两个o。</td>
</tr>
<tr>
<td align="left"><code>&#123;n,&#125;</code></td>
<td align="left">n是一个非负整数。至少匹配n次。例如，“<code>o&#123;2,&#125;</code>”不能匹配“<code>Bob</code>”中的“<code>o</code>”，但能匹配“<code>foooood</code>”中的所有o。“<code>o&#123;1,&#125;</code>”等价于“<code>o+</code>”。“<code>o&#123;0,&#125;</code>”则等价于“<code>o*</code>”。</td>
</tr>
<tr>
<td align="left"><code>&#123;n,m&#125;</code></td>
<td align="left">m和n均为非负整数，其中n&lt;=m。最少匹配n次且最多匹配m次。例如，“<code>o&#123;1,3&#125;</code>”将匹配“<code>fooooood</code>”中的前三个o。“<code>o&#123;0,1&#125;</code>”等价于“<code>o?</code>”。请注意在逗号和两个数之间不能有空格。</td>
</tr>
<tr>
<td align="left"><code>?</code></td>
<td align="left">非贪心量化（Non-greedy quantifiers）：当该字符紧跟在任何一个其他重复修饰符（<em>,+,?，{n}，{n,}，{n,m}）后面时，匹配模式是*</em>非**贪婪的。非贪婪模式尽可能少的匹配所搜索的字符串，而默认的贪婪模式则尽可能多的匹配所搜索的字符串。例如，对于字符串“<code>oooo</code>”，“<code>o+?</code>”将匹配单个“<code>o</code>”，而“<code>o+</code>”将匹配所有“<code>o</code>”。</td>
</tr>
<tr>
<td align="left"><code>.</code></td>
<td align="left">匹配除“<code>\r</code>”“<code>\n</code>”之外的任何单个字符。要匹配包括“<code>\r</code>”“<code>\n</code>”在内的任何字符，请使用像“`(.|\r|\n)”的模式。</td>
</tr>
<tr>
<td align="left"><code>(pattern)</code></td>
<td align="left">匹配pattern并获取这一匹配的子字符串。该子字符串用于向后引用。所获取的匹配可以从产生的Matches集合得到，在VBScript中使用SubMatches集合，在JScript中则使用$0…$9属性。要匹配圆括号字符，请使用“<code>\(</code>”或“<code>\)</code>”。可带数量后缀。</td>
</tr>
<tr>
<td align="left"><code>(?:pattern)</code></td>
<td align="left">匹配pattern但不获取匹配的子字符串（shy groups），也就是说这是一个非获取匹配，不存储匹配的子字符串用于向后引用。这在使用或字符“`(</td>
</tr>
<tr>
<td align="left"><code>(?=pattern)</code></td>
<td align="left">正向肯定预查（look ahead positive assert），在任何匹配pattern的字符串开始处匹配查找字符串。这是一个非获取匹配，也就是说，该匹配不需要获取供以后使用。例如，“`Windows(?=95</td>
</tr>
<tr>
<td align="left"><code>(?!pattern)</code></td>
<td align="left">正向否定预查（negative assert），在任何不匹配pattern的字符串开始处匹配查找字符串。这是一个非获取匹配，也就是说，该匹配不需要获取供以后使用。例如“`Windows(?!95</td>
</tr>
<tr>
<td align="left"><code>(?&lt;=pattern)</code></td>
<td align="left">反向（look behind）肯定预查，与正向肯定预查类似，只是方向相反。例如，“`(?&lt;=95</td>
</tr>
<tr>
<td align="left"><code>(?&lt;!pattern)</code></td>
<td align="left">反向否定预查，与正向否定预查类似，只是方向相反。例如“`(?&lt;!95</td>
</tr>
<tr>
<td align="left">`x</td>
<td align="left">y`</td>
</tr>
<tr>
<td align="left"><code>[xyz]</code></td>
<td align="left">字符集合（character class）。匹配所包含的任意一个字符。例如，“<code>[abc]</code>”可以匹配“<code>plain</code>”中的“<code>a</code>”。特殊字符仅有反斜线\保持特殊含义，用于转义字符。其它特殊字符如星号、加号、各种括号等均作为普通字符。脱字符^如果出现在首位则表示负值字符集合；如果出现在字符串中间就仅作为普通字符。连字符 - 如果出现在字符串中间表示字符范围描述；如果如果出现在首位（或末尾）则仅作为普通字符。右方括号应转义出现，也可以作为首位字符出现。</td>
</tr>
<tr>
<td align="left"><code>[^xyz]</code></td>
<td align="left">排除型字符集合（negated character classes）。匹配未列出的任意字符。例如，“<code>[^abc]</code>”可以匹配“<code>plain</code>”中的“<code>plain</code>”。</td>
</tr>
<tr>
<td align="left"><code>[a-z]</code></td>
<td align="left">字符范围。匹配指定范围内的任意字符。例如，“<code>[a-z]</code>”可以匹配“<code>a</code>”到“<code>z</code>”范围内的任意小写字母字符。</td>
</tr>
<tr>
<td align="left"><code>[^a-z]</code></td>
<td align="left">排除型的字符范围。匹配任何不在指定范围内的任意字符。例如，“<code>[^a-z]</code>”可以匹配任何不在“<code>a</code>”到“<code>z</code>”范围内的任意字符。</td>
</tr>
<tr>
<td align="left"><code>[:name:]</code></td>
<td align="left">增加命名字符类（named character class）[注 1]中的字符到表达式。只能用于<strong>方括号表达式</strong>。</td>
</tr>
<tr>
<td align="left"><code>[=elt=]</code></td>
<td align="left">增加当前locale下排序（collate）等价于字符“elt”的元素。例如，[=a=]可能会增加ä、á、à、ă、ắ、ằ、ẵ、ẳ、â、ấ、ầ、ẫ、ẩ、ǎ、å、ǻ、ä、ǟ、ã、ȧ、ǡ、ą、ā、ả、ȁ、ȃ、ạ、ặ、ậ、ḁ、ⱥ、ᶏ、ɐ、ɑ 。只能用于方括号表达式。</td>
</tr>
<tr>
<td align="left"><code>[.elt.]</code></td>
<td align="left">增加排序元素（collation element）elt到表达式中。这是因为某些排序元素由多个字符组成。例如，29个字母表的西班牙语， “CH”作为单个字母排在字母C之后，因此会产生如此排序“cinco, credo, chispa”。只能用于方括号表达式。</td>
</tr>
<tr>
<td align="left"><code>\b</code></td>
<td align="left">匹配一个单词边界，也就是指单词和空格间的位置。例如，“<code>er\b</code>”可以匹配“<code>never</code>”中的“<code>er</code>”，但不能匹配“<code>verb</code>”中的“<code>er</code>”。</td>
</tr>
<tr>
<td align="left"><code>\B</code></td>
<td align="left">匹配非单词边界。“<code>er\B</code>”能匹配“<code>verb</code>”中的“<code>er</code>”，但不能匹配“<code>never</code>”中的“<code>er</code>”。</td>
</tr>
<tr>
<td align="left"><code>\cx</code></td>
<td align="left">匹配由x指明的控制字符。x的值必须为<code>A-Z</code>或<code>a-z</code>之一。否则，将c视为一个原义的“<code>c</code>”字符。控制字符的值等于x的值最低5比特（即对3210进制的余数）。例如，\cM匹配一个Control-M或回车符。\ca等效于\u0001, \cb等效于\u0002, 等等…</td>
</tr>
<tr>
<td align="left"><code>\d</code></td>
<td align="left">匹配一个数字字符。等价于[0-9]。注意Unicode正则表达式会匹配全角数字字符。</td>
</tr>
<tr>
<td align="left"><code>\D</code></td>
<td align="left">匹配一个非数字字符。等价于[^0-9]。</td>
</tr>
<tr>
<td align="left"><code>\f</code></td>
<td align="left">匹配一个换页符。等价于\x0c和\cL。</td>
</tr>
<tr>
<td align="left"><code>\n</code></td>
<td align="left">匹配一个换行符。等价于\x0a和\cJ。</td>
</tr>
<tr>
<td align="left"><code>\r</code></td>
<td align="left">匹配一个回车符。等价于\x0d和\cM。</td>
</tr>
<tr>
<td align="left"><code>\s</code></td>
<td align="left">匹配任何空白字符，包括空格、制表符、换页符等等。等价于[ \f\n\r\t\v]。注意Unicode正则表达式会匹配全角空格符。</td>
</tr>
<tr>
<td align="left"><code>\S</code></td>
<td align="left">匹配任何非空白字符。等价于[^ \f\n\r\t\v]。</td>
</tr>
<tr>
<td align="left"><code>\t</code></td>
<td align="left">匹配一个制表符。等价于\x09和\cI。</td>
</tr>
<tr>
<td align="left"><code>\v</code></td>
<td align="left">匹配一个垂直制表符。等价于\x0b和\cK。</td>
</tr>
<tr>
<td align="left"><code>\w</code></td>
<td align="left">匹配包括下划线的任何单词字符。等价于“<code>[A-Za-z0-9_]</code>”。注意Unicode正则表达式会匹配中文字符。</td>
</tr>
<tr>
<td align="left"><code>\W</code></td>
<td align="left">匹配任何非单词字符。等价于“<code>[^A-Za-z0-9_]</code>”。</td>
</tr>
<tr>
<td align="left"><code>\xnn</code></td>
<td align="left">十六进制转义字符序列。匹配两个十六进制数字nn表示的字符。例如，“<code>\x41</code>”匹配“<code>A</code>”。“<code>\x041</code>”则等价于“<code>\x04&amp;1</code>”。正则表达式中可以使用ASCII编码。.</td>
</tr>
<tr>
<td align="left"><code>\num</code></td>
<td align="left">向后引用（back-reference）一个子字符串（substring），该子字符串与正则表达式的第num个用括号围起来的捕捉群（capture group）子表达式（subexpression）匹配。其中num是从1开始的十进制正整数，其上限可能是9[注 2]、31[注 3]、99甚至无限[注 4]。例如：“<code>(.)\1</code>”匹配两个连续的相同字符。</td>
</tr>
<tr>
<td align="left"><code>\n</code></td>
<td align="left">标识一个八进制转义值或一个向后引用。如果\n之前至少n个获取的子表达式，则n为向后引用。否则，如果n为八进制数字（0-7），则n为一个八进制转义值。</td>
</tr>
<tr>
<td align="left"><code>\nm</code></td>
<td align="left">3位八进制数字，标识一个八进制转义值或一个向后引用。如果\nm之前至少有nm个获得子表达式，则nm为向后引用。如果\nm之前至少有n个获取，则n为一个后跟文字m的向后引用。如果前面的条件都不满足，若n和m均为八进制数字（0-7），则\nm将匹配八进制转义值nm。</td>
</tr>
<tr>
<td align="left"><code>\nml</code></td>
<td align="left">如果n为八进制数字（0-3），且m和l均为八进制数字（0-7），则匹配八进制转义值nml。</td>
</tr>
<tr>
<td align="left"><code>\un</code></td>
<td align="left">Unicode转义字符序列。其中n是一个用四个十六进制数字表示的Unicode字符。例如，\u00A9匹配版权符号（©）。</td>
</tr>
</tbody></table>
<p>常用的匹配</p>
<table>
<thead>
<tr>
<th align="center">字符</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">\d</td>
<td align="center">代表任意数字，就是阿拉伯数字 0-9 这些玩意。</td>
</tr>
<tr>
<td align="center"><code>\D</code></td>
<td align="center">大写的就是和小写的唱反调，\d 你代表的是任意数字是吧？那么我 \D 就代表不是数字的。</td>
</tr>
<tr>
<td align="center"><code>\w</code></td>
<td align="center">代表字母，数字，下划线。也就是 a-z、A-Z、0-9、_。</td>
</tr>
<tr>
<td align="center"><code>\W</code></td>
<td align="center">跟 \w 唱反调，代表不是字母，不是数字，不是下划线的。</td>
</tr>
<tr>
<td align="center">\n</td>
<td align="center">代表一个换行。</td>
</tr>
<tr>
<td align="center"><code>\r</code></td>
<td align="center">代表一个回车。</td>
</tr>
<tr>
<td align="center"><code>\f</code></td>
<td align="center">代表换页。</td>
</tr>
<tr>
<td align="center"><code>\t</code></td>
<td align="center">代表一个 Tab 。</td>
</tr>
<tr>
<td align="center"><code>\s</code></td>
<td align="center">代表所有的空白字符，也就是上面这个：\n、\r、\t、\f。</td>
</tr>
<tr>
<td align="center"><code>\S</code></td>
<td align="center">跟 \s 唱反调，代表所有不是空白的字符。</td>
</tr>
<tr>
<td align="center"><code>\A</code></td>
<td align="center">代表字符串的开始。</td>
</tr>
<tr>
<td align="center"><code>\Z</code></td>
<td align="center">代表字符串的结束。</td>
</tr>
<tr>
<td align="center">^</td>
<td align="center">匹配字符串开始的位置。</td>
</tr>
<tr>
<td align="center">$</td>
<td align="center">匹配字符创结束的位置。</td>
</tr>
<tr>
<td align="center">.</td>
<td align="center">代表所有的单个字符，除了 \n \r</td>
</tr>
<tr>
<td align="center"><code>[...]</code></td>
<td align="center">代表在 [] 范围内的字符，比如 [a-z] 就代表 a到z的字母</td>
</tr>
<tr>
<td align="center"><code>[^...]</code></td>
<td align="center">跟 […] 唱反调，代表不在 [] 范围内的字符</td>
</tr>
<tr>
<td align="center">{n}</td>
<td align="center">匹配在 {n} 前面的东西，比如: o{2} 不能匹配 Bob 中的 o ，但是能匹配 food 中的两个o。</td>
</tr>
<tr>
<td align="center"><code>&#123;n,m&#125;</code></td>
<td align="center">匹配在 {n,m} 前面的东西，比如：o{1,3} 将匹配“fooooood”中的前三个o。</td>
</tr>
<tr>
<td align="center"><code>&#123;n，&#125;</code></td>
<td align="center">匹配在 {n,} 前面的东西，比如：o{2,} 不能匹配“Bob”中的“o”，但能匹配“foooood”中的所有o。</td>
</tr>
<tr>
<td align="center"><code>*</code></td>
<td align="center">和 {0,} 一个样，匹配 * 前面的 0 次或多次。 比如 zo* 能匹配“z”、“zo”以及“zoo”。</td>
</tr>
<tr>
<td align="center"><code>+</code></td>
<td align="center">和{1，} 一个样，匹配 + 前面 1 次或多次。 比如 zo+”能匹配“zo”以及“zoo”，但不能匹配“z”。</td>
</tr>
<tr>
<td align="center"><code>？</code></td>
<td align="center">和{0,1} 一个样，匹配 ？前面 0 次或 1 次。</td>
</tr>
<tr>
<td align="center">a|b</td>
<td align="center">匹配 a 或者 b。</td>
</tr>
<tr>
<td align="center"><code>（）</code></td>
<td align="center">匹配括号里面的内容。</td>
</tr>
</tbody></table>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://youzg.cc/2020/08/20/2020-regex-list/" data-id="ckxg0kmsn0009jqsmdv326h14" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CS/" rel="tag">CS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Tool/" rel="tag">Tool</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2020-memory-taggedpointer" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/01/01/2020-memory-taggedpointer/" class="article-date">
  <time datetime="2019-12-31T16:00:00.000Z" itemprop="datePublished">2020-01-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/01/01/2020-memory-taggedpointer/">OC中的Tagged Pointer</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>OC中Tagged Pointer</p>
<ul>
<li>从64bit开始，iOS引入了<code>Tagged Pointer</code>技术，用于优化<code>NSNumber、NSDate、NSString</code>等小对象的存储</li>
<li>在没有实用<code>Tagged Pointer</code>之前，<code>NSNumber</code> 等对象需要动态分配内存、维护引用计数等，<code>NSNumber</code>指针存储是堆中<code>NSNumber</code>对象的地址值</li>
<li>实用<code>Tagged Pointer</code>之后，<code>NSNumber</code>指针里面存储的数据变成了：<code>Tag + Data</code>，也就是将数据直接存储在了指针中</li>
<li>mac平台上指针的最低有效位为1时是<code>Tagged Pointer</code>，iOS平台的最高位有效位为1时是<code>Tagged Pointer</code>且1&lt;&lt;63</li>
<li>当指针不够存储数据时，才会实用动态分配内存的方式来存储数据</li>
<li><code>obj_msgSend</code>能识别<code>Tagged Pointer</code>，比如<code>NSNumber</code>的<code>intValue</code>方法，直接从指针提取数据，节省了以前的调用开销</li>
</ul>
<pre class=" language-swift"><code class="language-swift">@<span class="token function">property</span> <span class="token punctuation">(</span>copy<span class="token punctuation">,</span> nonatomic<span class="token punctuation">)</span> <span class="token builtin">NSString</span> <span class="token operator">*</span>name<span class="token punctuation">;</span>

        dispatch_queue_t queue <span class="token operator">=</span> <span class="token function">dispatch_get_global_queue</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>int i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">1000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token function">dispatch_async</span><span class="token punctuation">(</span>queue<span class="token punctuation">,</span> <span class="token operator">^</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">self</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">NSString</span> stringWithFormat<span class="token punctuation">:</span>@<span class="token string">"abcdefghijklmno"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gi4dynnp9gj30nd03t3zp.jpg" alt="crash"></p>
<p>Set方法的本质</p>
<pre class=" language-swift"><code class="language-swift"><span class="token operator">-</span> <span class="token punctuation">(</span>void<span class="token punctuation">)</span>setName<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token builtin">NSString</span> <span class="token operator">*</span><span class="token punctuation">)</span>name <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>_name <span class="token operator">!=</span> name<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                <span class="token punctuation">[</span>_name release<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//多个线程同时执行release导致</span>
        _name <span class="token operator">=</span> <span class="token punctuation">[</span>name copy<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre>
<p>解决方案</p>
<ul>
<li><code>name</code>属性用<code>atomic</code>修饰</li>
<li>赋值位置加锁</li>
</ul>
<p>而如果较短的字符串时，代码并不会carsh，使用的<code>TaggedPointer</code></p>
<pre class=" language-swift"><code class="language-swift">dispatch_queue_t queue <span class="token operator">=</span> <span class="token function">dispatch_get_global_queue</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>int i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">1000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token function">dispatch_async</span><span class="token punctuation">(</span>queue<span class="token punctuation">,</span> <span class="token operator">^</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">self</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">NSString</span> stringWithFormat<span class="token punctuation">:</span>@<span class="token string">"abc"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token builtin">NSString</span> <span class="token operator">*</span>str1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">NSString</span> stringWithFormat<span class="token punctuation">:</span>@<span class="token string">"abcdefghijklmno"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token builtin">NSString</span> <span class="token operator">*</span>str2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">NSString</span> stringWithFormat<span class="token punctuation">:</span>@<span class="token string">"abc"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span>@<span class="token string">"\nstr1:%@\nstr2:%@"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>str1 <span class="token keyword">class</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>str2 <span class="token keyword">class</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">NSLog</span><span class="token punctuation">(</span>@<span class="token string">"\nstr1:%p\nstr2:%p"</span><span class="token punctuation">,</span> str1<span class="token punctuation">,</span> str2<span class="token punctuation">)</span><span class="token punctuation">;</span>

str1<span class="token punctuation">:</span>__NSCFString
str2<span class="token punctuation">:</span><span class="token builtin">NSTaggedPointerString</span>
str1<span class="token punctuation">:</span><span class="token number">0x281aac090</span> <span class="token comment" spellcheck="true">//明显不够64位</span>
str2<span class="token punctuation">:</span><span class="token number">0xbabe312ffd3f4e86</span> <span class="token comment" spellcheck="true">//这里是babe 312f fd3f 4e86共64位，且最高有效位是1</span></code></pre>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://youzg.cc/2020/01/01/2020-memory-taggedpointer/" data-id="ckxg0kmso000bjqsm8p6r4mbp" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/" rel="tag">iOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/" rel="tag">内存管理</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2020-memory-manage02" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/01/01/2020-memory-manage02/" class="article-date">
  <time datetime="2019-12-31T16:00:00.000Z" itemprop="datePublished">2020-01-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/01/01/2020-memory-manage02/">iOS的内存布局</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gi3c43q3ptj30650a5dgd.jpg" alt="内存结构"></p>
<ul>
<li><p>代码段<br>编译后的代码</p>
</li>
<li><p>数据段<br>  1.字符串常量：如<code>let string = &quot;string&quot;</code><br>  2.已初始化数据：已初始化的全局变量、静态变量等<br>  3.未初始化数据：未初始化的全局变量、静态变量等</p>
</li>
<li><p>堆 (分配地址由低到高，即分配的内存地址越来越大)<br>通过<code>alloc</code>、<code>malloc</code>、<code>calloc</code>等动态分配的空间</p>
</li>
<li><p>栈（分配地址由高到低）<br>函数调用开销,如局部变量。</p>
</li>
</ul>
<p>代码</p>
<pre class=" language-swift"><code class="language-swift">int a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
int b<span class="token punctuation">;</span>

int <span class="token function">main</span><span class="token punctuation">(</span>int argc<span class="token punctuation">,</span> char <span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token builtin">NSString</span> <span class="token operator">*</span> appDelegateClassName<span class="token punctuation">;</span>
    @autoreleasepool <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        appDelegateClassName <span class="token operator">=</span> <span class="token function">NSStringFromClass</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token builtin">AppDelegate</span> <span class="token keyword">class</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">static</span> int c <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
        <span class="token keyword">static</span> int d<span class="token punctuation">;</span>
        int e<span class="token punctuation">;</span>
        int f <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
        <span class="token builtin">NSString</span> <span class="token operator">*</span>g <span class="token operator">=</span> @<span class="token string">"123"</span><span class="token punctuation">;</span>
        <span class="token builtin">NSObject</span> <span class="token operator">*</span>h <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token builtin">NSObject</span> alloc<span class="token punctuation">]</span> <span class="token keyword">init</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token function">NSLog</span><span class="token punctuation">(</span>@<span class="token string">"\n&amp;a=%p\n&amp;b=%p\n&amp;c=%p\n&amp;d=%p\n&amp;e=%p\n&amp;f=%p\n&amp;g=%p\n&amp;h=%p\n"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>a<span class="token punctuation">,</span> <span class="token operator">&amp;</span>b<span class="token punctuation">,</span> <span class="token operator">&amp;</span>c<span class="token punctuation">,</span> <span class="token operator">&amp;</span>d<span class="token punctuation">,</span> <span class="token operator">&amp;</span>e<span class="token punctuation">,</span> <span class="token operator">&amp;</span>f<span class="token punctuation">,</span> g<span class="token punctuation">,</span> h<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">UIApplicationMain</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">,</span> <span class="token constant">nil</span><span class="token punctuation">,</span> appDelegateClassName<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/// 输出</span>
<span class="token operator">&amp;</span>a<span class="token operator">=</span><span class="token number">0x100151578</span>
<span class="token operator">&amp;</span>b<span class="token operator">=</span><span class="token number">0x100151644</span>
<span class="token operator">&amp;</span>c<span class="token operator">=</span><span class="token number">0x10015157c</span>
<span class="token operator">&amp;</span>d<span class="token operator">=</span><span class="token number">0x100151640</span>
<span class="token operator">&amp;</span>e<span class="token operator">=</span><span class="token number">0x16fcbb874</span>
<span class="token operator">&amp;</span>f<span class="token operator">=</span><span class="token number">0x16fcbb870</span>
<span class="token operator">&amp;</span>g<span class="token operator">=</span><span class="token number">0x10014c028</span>
<span class="token operator">&amp;</span>h<span class="token operator">=</span><span class="token number">0x2814a4150</span></code></pre>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://youzg.cc/2020/01/01/2020-memory-manage02/" data-id="ckxg0kmsq000fjqsmdvj7hhjx" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Swift/" rel="tag">Swift</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/" rel="tag">iOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/" rel="tag">内存管理</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2020-tableview01" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/01/01/2020-tableview01/" class="article-date">
  <time datetime="2019-12-31T16:00:00.000Z" itemprop="datePublished">2020-01-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/01/01/2020-tableview01/">简化TableViewCell</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="简化tableView-cellForRowAt-中多种Cell的情况"><a href="#简化tableView-cellForRowAt-中多种Cell的情况" class="headerlink" title="简化tableView(_:cellForRowAt:)中多种Cell的情况"></a>简化<code>tableView(_:cellForRowAt:)</code>中多种Cell的情况</h4><p><a href="链接：https://juejin.im/post/6862954764179603469">来自<code>YuLeiFuYun的掘金</code></a></p>
<pre class=" language-swift"><code class="language-swift">protocol <span class="token builtin">Configurable</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">func</span> <span class="token function">configure</span><span class="token punctuation">(</span><span class="token number">_</span> model<span class="token punctuation">:</span> <span class="token builtin">Any</span><span class="token operator">?</span><span class="token punctuation">)</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

<span class="token keyword">extension</span> <span class="token builtin">UITableViewCell</span><span class="token punctuation">:</span> <span class="token builtin">Configurable</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">func</span> <span class="token function">configure</span><span class="token punctuation">(</span><span class="token number">_</span> model<span class="token punctuation">:</span> <span class="token builtin">Any</span><span class="token operator">?</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>  <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

<span class="token keyword">extension</span> <span class="token builtin">UITableView</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>

    <span class="token keyword">func</span> dequeueReusableCell<span class="token operator">&lt;</span>T<span class="token punctuation">:</span> <span class="token builtin">Configurable</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token keyword">for</span> indexPath<span class="token punctuation">:</span> <span class="token builtin">IndexPath</span><span class="token punctuation">,</span> with identifiers<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> T <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span>index<span class="token punctuation">,</span> identifier<span class="token punctuation">)</span> <span class="token keyword">in</span> identifiers<span class="token punctuation">.</span><span class="token function">enumerated</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">where</span> index <span class="token operator">==</span> indexPath<span class="token punctuation">.</span>section <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token keyword">let</span> cell <span class="token operator">=</span> <span class="token function">dequeueReusableCell</span><span class="token punctuation">(</span>withIdentifier<span class="token punctuation">:</span> identifier<span class="token punctuation">,</span> <span class="token keyword">for</span><span class="token punctuation">:</span> indexPath<span class="token punctuation">)</span> <span class="token keyword">as</span><span class="token operator">?</span> T <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> cell
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            <span class="token function">fatalError</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token function">fatalError</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://youzg.cc/2020/01/01/2020-tableview01/" data-id="ckxg0kmsq000gjqsm7qe57qen" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Swift/" rel="tag">Swift</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/" rel="tag">iOS</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2019-memory-manage01" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/05/01/2019-memory-manage01/" class="article-date">
  <time datetime="2019-04-30T16:00:00.000Z" itemprop="datePublished">2019-05-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/05/01/2019-memory-manage01/">使用CADisplayLink、NSTimer有什么注意点</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>CADisplayLink、NSTimer会对target产生强引用，此时target又对他们产生强引用，那么就会触发循环引用</p>
<p>以下情况都会触发循环引用</p>
<blockquote>
<p>CADisplayLink<br>是用于同步屏幕刷新频率的计数器，调用频率和屏幕刷新频率一致，目前基本都是60fps</p>
</blockquote>
<pre class=" language-swift"><code class="language-swift">    <span class="token keyword">private</span> <span class="token keyword">var</span> link<span class="token punctuation">:</span> <span class="token builtin">CADisplayLink</span><span class="token operator">?</span>

    <span class="token keyword">override</span> <span class="token keyword">func</span> <span class="token function">viewDidLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">viewDidLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        link <span class="token operator">=</span> <span class="token function">CADisplayLink</span><span class="token punctuation">(</span>target<span class="token punctuation">:</span> <span class="token keyword">self</span><span class="token punctuation">,</span> selector<span class="token punctuation">:</span> #<span class="token function">selector</span><span class="token punctuation">(</span>linkAction<span class="token punctuation">)</span><span class="token punctuation">)</span>
        link<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>to<span class="token punctuation">:</span> <span class="token builtin">RunLoop</span><span class="token punctuation">.</span>main<span class="token punctuation">,</span> forMode<span class="token punctuation">:</span> <span class="token punctuation">.</span><span class="token keyword">default</span><span class="token punctuation">)</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token atrule">@objc</span> <span class="token keyword">func</span> <span class="token function">linkAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"CADisplayLink"</span><span class="token punctuation">)</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token keyword">deinit</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        link<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<blockquote>
<p>Timer</p>
</blockquote>
<pre class=" language-swift"><code class="language-swift">    <span class="token keyword">private</span> <span class="token keyword">var</span> timer<span class="token punctuation">:</span> <span class="token builtin">Timer</span><span class="token operator">?</span>

    <span class="token keyword">override</span> <span class="token keyword">func</span> <span class="token function">viewDidLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">viewDidLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
           timer <span class="token operator">=</span> <span class="token builtin">Timer</span><span class="token punctuation">.</span><span class="token function">scheduledTimer</span><span class="token punctuation">(</span>timeInterval<span class="token punctuation">:</span> <span class="token number">0.1</span><span class="token punctuation">,</span> target<span class="token punctuation">:</span> <span class="token keyword">self</span><span class="token punctuation">,</span> selector<span class="token punctuation">:</span> #<span class="token function">selector</span><span class="token punctuation">(</span>timerAction<span class="token punctuation">)</span><span class="token punctuation">,</span> userInfo<span class="token punctuation">:</span> <span class="token constant">nil</span><span class="token punctuation">,</span> repeats<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token atrule">@objc</span> <span class="token keyword">func</span> <span class="token function">timerAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"Timer"</span><span class="token punctuation">)</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token keyword">deinit</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        timer<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ghu3z5zvt6j30sy08e76y.jpg" alt="截屏2020-08-17 下午9.02.39"></p>
<h4 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h4><h5 id="1-使用block而非target"><a href="#1-使用block而非target" class="headerlink" title="1.使用block而非target"></a>1.使用block而非target</h5><pre class=" language-swift"><code class="language-swift">        timer <span class="token operator">=</span> <span class="token builtin">Timer</span><span class="token punctuation">.</span><span class="token function">scheduledTimer</span><span class="token punctuation">(</span>withTimeInterval<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> repeats<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> block<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> <span class="token punctuation">[</span><span class="token keyword">weak</span> <span class="token keyword">self</span><span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token number">_</span><span class="token punctuation">)</span> <span class="token keyword">in</span>
            <span class="token keyword">guard</span> <span class="token keyword">let</span> <span class="token keyword">self</span> <span class="token operator">=</span> <span class="token keyword">self</span> <span class="token keyword">else</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> <span class="token keyword">return</span> <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            <span class="token keyword">self</span><span class="token punctuation">.</span><span class="token function">testFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span>
</code></pre>
<h5 id="2-使用代理对象-NSProxy"><a href="#2-使用代理对象-NSProxy" class="headerlink" title="2.使用代理对象(NSProxy)"></a>2.使用代理对象(<code>NSProxy</code>)</h5><p>类似NSProxy处理</p>
<pre class=" language-swift"><code class="language-swift"><span class="token keyword">class</span> <span class="token class-name">WeakLinkProxy</span><span class="token punctuation">:</span> <span class="token builtin">NSObject</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>

    <span class="token keyword">weak</span> <span class="token keyword">var</span> link<span class="token punctuation">:</span> <span class="token builtin">CADisplayLink</span><span class="token operator">?</span>
    <span class="token keyword">weak</span> <span class="token keyword">var</span> target<span class="token punctuation">:</span> <span class="token builtin">NSObjectProtocol</span><span class="token operator">?</span>
    <span class="token keyword">var</span> sel<span class="token punctuation">:</span> <span class="token builtin">Selector</span><span class="token operator">?</span>

    <span class="token keyword">required</span> <span class="token keyword">init</span><span class="token punctuation">(</span><span class="token number">_</span> target<span class="token punctuation">:</span> <span class="token builtin">NSObjectProtocol</span><span class="token operator">?</span><span class="token punctuation">,</span> sel<span class="token punctuation">:</span> <span class="token builtin">Selector</span><span class="token operator">?</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">self</span><span class="token punctuation">.</span>target <span class="token operator">=</span> target
        <span class="token keyword">self</span><span class="token punctuation">.</span>sel <span class="token operator">=</span> sel
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token keyword">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">guard</span> target<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">responds</span><span class="token punctuation">(</span>to<span class="token punctuation">:</span> sel<span class="token punctuation">)</span> <span class="token operator">?</span><span class="token operator">?</span> <span class="token boolean">false</span> <span class="token keyword">else</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> method <span class="token operator">=</span> <span class="token function">class_getInstanceMethod</span><span class="token punctuation">(</span>classForCoder<span class="token punctuation">,</span> #<span class="token function">selector</span><span class="token punctuation">(</span><span class="token builtin">WeakLinkProxy</span><span class="token punctuation">.</span>redirectionMethod<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token keyword">let</span> selector <span class="token operator">=</span> sel<span class="token punctuation">,</span> <span class="token keyword">let</span> currentMethod <span class="token operator">=</span> method <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token function">class_replaceMethod</span><span class="token punctuation">(</span>classForCoder<span class="token punctuation">,</span> selector<span class="token punctuation">,</span> <span class="token function">method_getImplementation</span><span class="token punctuation">(</span>currentMethod<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">method_getTypeEncoding</span><span class="token punctuation">(</span>currentMethod<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token atrule">@objc</span> <span class="token keyword">func</span> <span class="token function">redirectionMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token keyword">let</span> currentTarget <span class="token operator">=</span> target <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            currentTarget<span class="token punctuation">.</span><span class="token function">perform</span><span class="token punctuation">(</span>sel<span class="token punctuation">)</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token keyword">else</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            link<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre>
<pre class=" language-swift"><code class="language-swift">    <span class="token keyword">let</span> proxy <span class="token operator">=</span> <span class="token function">YOUWeakLinkProxy</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">,</span> sel<span class="token punctuation">:</span> #<span class="token function">selector</span><span class="token punctuation">(</span>linkAction<span class="token punctuation">)</span><span class="token punctuation">)</span>
    link <span class="token operator">=</span> <span class="token function">CADisplayLink</span><span class="token punctuation">(</span>target<span class="token punctuation">:</span> proxy<span class="token punctuation">,</span> selector<span class="token punctuation">:</span> #<span class="token function">selector</span><span class="token punctuation">(</span>linkAction<span class="token punctuation">)</span><span class="token punctuation">)</span>
    link<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>to<span class="token punctuation">:</span> <span class="token builtin">RunLoop</span><span class="token punctuation">.</span>main<span class="token punctuation">,</span> forMode<span class="token punctuation">:</span> <span class="token punctuation">.</span><span class="token keyword">default</span><span class="token punctuation">)</span>
    proxy<span class="token punctuation">.</span>link <span class="token operator">=</span> link</code></pre>
<p>以上定时器均依赖Runloop，如果Runloop有耗时操作，则会导致计数器不准确</p>
<h4 id="GCD"><a href="#GCD" class="headerlink" title="GCD"></a>GCD</h4><pre class=" language-swift"><code class="language-swift">    <span class="token keyword">var</span> timer<span class="token punctuation">:</span> <span class="token builtin">DispatchSourceTimer</span><span class="token operator">?</span>

    <span class="token comment" spellcheck="true">// flags: DispatchSource.TimerFlags Flags to use when configuring a timer dispatch source.这里应该是计时器标记，初始化方法直接是空Set</span>
    timer <span class="token operator">=</span> <span class="token builtin">DispatchSource</span><span class="token punctuation">.</span><span class="token function">makeTimerSource</span><span class="token punctuation">(</span>flags<span class="token punctuation">:</span> <span class="token builtin">DispatchSource</span><span class="token punctuation">.</span><span class="token builtin">TimerFlags</span><span class="token punctuation">.</span><span class="token keyword">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> queue<span class="token punctuation">:</span> <span class="token builtin">DispatchQueue</span><span class="token punctuation">.</span><span class="token function">global</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    timer<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">schedule</span><span class="token punctuation">(</span>deadline<span class="token punctuation">:</span> <span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> repeating<span class="token punctuation">:</span> <span class="token punctuation">.</span><span class="token function">seconds</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> leeway<span class="token punctuation">:</span> <span class="token punctuation">.</span><span class="token function">milliseconds</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    timer<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">setEventHandler</span><span class="token punctuation">(</span>handler<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token builtin">DispatchQueue</span><span class="token punctuation">.</span>main<span class="token punctuation">.</span>async <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>

        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span>
    timer<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">resume</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre>
<p>封装后的GCD</p>
<pre class=" language-swift"><code class="language-swift"><span class="token keyword">typealias</span> <span class="token builtin">YAUTimerBlock</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">Void</span>

<span class="token keyword">class</span> <span class="token class-name">YAUTimer</span><span class="token punctuation">:</span> <span class="token builtin">NSObject</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">let</span> shared <span class="token operator">=</span> <span class="token function">YAUTimer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token keyword">var</span> timers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">:</span> <span class="token builtin">DispatchSourceTimer</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token keyword">var</span> semaphore <span class="token operator">=</span> <span class="token function">DispatchSemaphore</span><span class="token punctuation">(</span>value<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">)</span>

    <span class="token atrule">@objc</span> <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">YAUTimer</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token builtin">YAUTimer</span><span class="token punctuation">.</span>shared
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">override</span> <span class="token keyword">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token keyword">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token function">execTask</span><span class="token punctuation">(</span><span class="token number">_</span> target<span class="token punctuation">:</span> <span class="token builtin">AnyObject</span><span class="token punctuation">,</span> selector<span class="token punctuation">:</span> <span class="token builtin">Selector</span><span class="token punctuation">,</span> start<span class="token punctuation">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> interval<span class="token punctuation">:</span> <span class="token builtin">Double</span><span class="token punctuation">,</span> repeats<span class="token punctuation">:</span> <span class="token builtin">Bool</span><span class="token punctuation">,</span> async<span class="token punctuation">:</span> <span class="token builtin">Bool</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">String</span><span class="token operator">?</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">execTask</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> <span class="token punctuation">[</span><span class="token keyword">weak</span> target<span class="token punctuation">]</span> <span class="token keyword">in</span>
            <span class="token keyword">guard</span> <span class="token keyword">let</span> target <span class="token operator">=</span> target <span class="token keyword">else</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> <span class="token keyword">return</span> <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> target<span class="token punctuation">.</span><span class="token function">responds</span><span class="token punctuation">(</span>to<span class="token punctuation">:</span> selector<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                <span class="token number">_</span> <span class="token operator">=</span> target<span class="token punctuation">.</span><span class="token function">perform</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span> start<span class="token punctuation">:</span> start<span class="token punctuation">,</span> interval<span class="token punctuation">:</span> interval<span class="token punctuation">,</span> repeats<span class="token punctuation">:</span> repeats<span class="token punctuation">,</span> async<span class="token punctuation">:</span> async<span class="token punctuation">)</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token function">execTask</span><span class="token punctuation">(</span><span class="token number">_</span> task<span class="token punctuation">:</span> @escaping <span class="token builtin">YAUTimerBlock</span><span class="token punctuation">,</span> start<span class="token punctuation">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> interval<span class="token punctuation">:</span> <span class="token builtin">Double</span><span class="token punctuation">,</span> repeats<span class="token punctuation">:</span> <span class="token builtin">Bool</span><span class="token punctuation">,</span> async<span class="token punctuation">:</span> <span class="token builtin">Bool</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">String</span><span class="token operator">?</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> interval <span class="token operator">&lt;=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> repeats <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token constant">nil</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

        <span class="token keyword">let</span> queue <span class="token operator">=</span> async <span class="token operator">?</span> <span class="token builtin">DispatchQueue</span><span class="token punctuation">.</span><span class="token function">global</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token builtin">DispatchQueue</span><span class="token punctuation">.</span>main
        <span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token builtin">DispatchSource</span><span class="token punctuation">.</span><span class="token function">makeTimerSource</span><span class="token punctuation">(</span>flags<span class="token punctuation">:</span> <span class="token builtin">DispatchSource</span><span class="token punctuation">.</span><span class="token builtin">TimerFlags</span><span class="token punctuation">.</span><span class="token keyword">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> queue<span class="token punctuation">:</span> queue<span class="token punctuation">)</span>
        <span class="token keyword">let</span> deadline <span class="token operator">=</span> <span class="token builtin">DispatchTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token builtin">DispatchTimeInterval</span><span class="token punctuation">.</span><span class="token function">seconds</span><span class="token punctuation">(</span>start<span class="token punctuation">)</span>
        timer<span class="token punctuation">.</span><span class="token function">schedule</span><span class="token punctuation">(</span>deadline<span class="token punctuation">:</span> deadline<span class="token punctuation">,</span> repeating<span class="token punctuation">:</span> interval<span class="token punctuation">)</span>

        <span class="token builtin">YAUTimer</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>semaphore<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">let</span> timerId <span class="token operator">=</span> <span class="token function">String</span><span class="token punctuation">(</span>format<span class="token punctuation">:</span> <span class="token string">"TimerId_%zd"</span><span class="token punctuation">,</span> <span class="token builtin">YAUTimer</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>timers<span class="token punctuation">.</span><span class="token builtin">count</span><span class="token punctuation">)</span>
        <span class="token builtin">YAUTimer</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>timers<span class="token punctuation">[</span>timerId<span class="token punctuation">]</span> <span class="token operator">=</span> timer
        <span class="token builtin">YAUTimer</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>semaphore<span class="token punctuation">.</span><span class="token function">signal</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

        timer<span class="token punctuation">.</span>setEventHandler <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token builtin">DispatchQueue</span><span class="token punctuation">.</span>main<span class="token punctuation">.</span>async <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token operator">!</span>repeats <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
                    <span class="token keyword">self</span><span class="token punctuation">.</span><span class="token function">cancelTask</span><span class="token punctuation">(</span>withTimerId<span class="token punctuation">:</span> timerId<span class="token punctuation">)</span>
                <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
                <span class="token function">task</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        timer<span class="token punctuation">.</span><span class="token function">resume</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> timerId
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token function">cancelTask</span><span class="token punctuation">(</span>withTimerId timerId<span class="token punctuation">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> timerId<span class="token punctuation">.</span><span class="token builtin">count</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

        <span class="token builtin">YAUTimer</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>semaphore<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token builtin">YAUTimer</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>timers<span class="token punctuation">[</span>timerId<span class="token punctuation">]</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
            timer<span class="token punctuation">.</span><span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token builtin">YAUTimer</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>timers<span class="token punctuation">.</span><span class="token function">removeValue</span><span class="token punctuation">(</span>forKey<span class="token punctuation">:</span> timerId<span class="token punctuation">)</span>
        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token builtin">YAUTimer</span><span class="token punctuation">.</span><span class="token function">sharedInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>semaphore<span class="token punctuation">.</span><span class="token function">signal</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/77ffd52ead2e">WeakLinkProxy来自Swift中Timer的循环引用解决方案</a><br><a target="_blank" rel="noopener" href="https://developer.apple.com/documentation/dispatch/dispatchsource">DispatchSource</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://youzg.cc/2019/05/01/2019-memory-manage01/" data-id="ckxg0kmsf0001jqsm7my70y0q" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Swift/" rel="tag">Swift</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/" rel="tag">iOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/" rel="tag">内存管理</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2020-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/09/07/2020-hello-world/" class="article-date">
  <time datetime="2018-09-07T01:25:00.000Z" itemprop="datePublished">2018-09-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Demo/">Demo</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/09/07/2020-hello-world/">尝试部署</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><pre class=" language-bash"><code class="language-bash">$ hexo new <span class="token string">"My New Post"</span></code></pre>
<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><pre class=" language-bash"><code class="language-bash">$ hexo server</code></pre>
<pre class=" language-swift"><code class="language-swift">void <span class="token function">_class_resolveMethod</span><span class="token punctuation">(</span><span class="token builtin">Class</span> <span class="token class-name">cls</span><span class="token punctuation">,</span> <span class="token constant">SEL</span> sel<span class="token punctuation">,</span> id inst<span class="token punctuation">)</span>
<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">// 是否是元类</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span> cls<span class="token operator">-</span><span class="token operator">></span><span class="token function">isMetaClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">// try [cls resolveInstanceMethod:sel]</span>

        <span class="token function">_class_resolveInstanceMethod</span><span class="token punctuation">(</span>cls<span class="token punctuation">,</span> sel<span class="token punctuation">,</span> inst<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> 
    <span class="token keyword">else</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">// try [nonMetaClass resolveClassMethod:sel]</span>
        <span class="token comment" spellcheck="true">// and [cls resolveInstanceMethod:sel]</span>
        <span class="token function">_class_resolveClassMethod</span><span class="token punctuation">(</span>cls<span class="token punctuation">,</span> sel<span class="token punctuation">,</span> inst<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 已经处理</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">lookUpImpOrNil</span><span class="token punctuation">(</span>cls<span class="token punctuation">,</span> sel<span class="token punctuation">,</span> inst<span class="token punctuation">,</span> 
                            <span class="token constant">NO</span><span class="token comment" spellcheck="true">/*initialize*/</span><span class="token punctuation">,</span> <span class="token constant">YES</span><span class="token comment" spellcheck="true">/*cache*/</span><span class="token punctuation">,</span> <span class="token constant">NO</span><span class="token comment" spellcheck="true">/*resolver*/</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
        <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>

        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre>
<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><pre class=" language-bash"><code class="language-bash">$ hexo generate</code></pre>
<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><pre class=" language-swift"><code class="language-swift"><span class="token operator">+</span> <span class="token punctuation">(</span>void<span class="token punctuation">)</span>load
<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//注册项目启动监听</span>
__block id observer <span class="token operator">=</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token builtin">NSNotificationCenter</span> defaultCenter<span class="token punctuation">]</span> addObserverForName<span class="token punctuation">:</span><span class="token builtin">UIApplicationDidFinishLaunchingNotification</span> object<span class="token punctuation">:</span><span class="token constant">nil</span> queue<span class="token punctuation">:</span><span class="token constant">nil</span> usingBlock<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span><span class="token builtin">NSNotification</span> <span class="token operator">*</span> _Nonnull note<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//更改bundlePath</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token builtin">NSBundle</span> bundleWithPath<span class="token punctuation">:</span>@<span class="token string">"/Applications/InjectionIII.app/Contents/Resources/iOSInjection10.bundle"</span><span class="token punctuation">]</span> load<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//[[NSBundle bundleWithPath:@"/Applications/InjectionIII.app/Contents/Resources/iOSInjection.bundle"] load];</span>

<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token builtin">NSNotificationCenter</span> defaultCenter<span class="token punctuation">]</span> removeObserver<span class="token punctuation">:</span>observer<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">//给UIViewController 注册injected 方法</span>
<span class="token function">class_addMethod</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token builtin">UIViewController</span> <span class="token keyword">class</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token function">NSSelectorFromString</span><span class="token punctuation">(</span>@<span class="token string">"injected"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token constant">IMP</span><span class="token punctuation">)</span>injected<span class="token punctuation">,</span> <span class="token string">"v@:"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre>
<pre class=" language-bash"><code class="language-bash">$ hexo deploy</code></pre>
<pre class=" language-swift"><code class="language-swift"><span class="token keyword">let</span> pageControl <span class="token operator">=</span> <span class="token function">UIPageControl</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
pageControl<span class="token punctuation">.</span>preferredIndicatorImage <span class="token operator">=</span> <span class="token function">UIImage</span><span class="token punctuation">(</span>systemName<span class="token punctuation">:</span><span class="token string">"tortoise"</span><span class="token punctuation">)</span>
pageControl<span class="token punctuation">.</span><span class="token function">setIndicatorImage</span><span class="token punctuation">(</span><span class="token function">UIImage</span><span class="token punctuation">(</span>systemName<span class="token punctuation">:</span><span class="token string">"hare"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> forPage<span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> datePicker <span class="token operator">=</span> <span class="token function">UIDatePicker</span><span class="token punctuation">(</span>frame<span class="token punctuation">:</span> <span class="token punctuation">.</span>zero<span class="token punctuation">)</span></code></pre>
<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://youzg.cc/2018/09/07/2020-hello-world/" data-id="ckxg19xbk0000qjsm4fpteo7g" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Demo/" rel="tag">Demo</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Markdown/" rel="tag">Markdown</a></li></ul>

    </footer>
  </div>
  
</article>


  


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/CS/">CS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Demo/">Demo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/">iOS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9D%82%E8%B0%88/">杂谈</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%AE%97%E6%B3%95/">算法</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/ARM/" rel="tag">ARM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CPU/" rel="tag">CPU</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CS/" rel="tag">CS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Demo/" rel="tag">Demo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Markdown/" rel="tag">Markdown</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Swift/" rel="tag">Swift</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Tool/" rel="tag">Tool</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iOS/" rel="tag">iOS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/" rel="tag">内存管理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="tag">数据结构</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">算法</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/ARM/" style="font-size: 10px;">ARM</a> <a href="/tags/CPU/" style="font-size: 10px;">CPU</a> <a href="/tags/CS/" style="font-size: 10px;">CS</a> <a href="/tags/Demo/" style="font-size: 10px;">Demo</a> <a href="/tags/Markdown/" style="font-size: 10px;">Markdown</a> <a href="/tags/Swift/" style="font-size: 15px;">Swift</a> <a href="/tags/Tool/" style="font-size: 10px;">Tool</a> <a href="/tags/iOS/" style="font-size: 20px;">iOS</a> <a href="/tags/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/" style="font-size: 15px;">内存管理</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 10px;">数据结构</a> <a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 10px;">算法</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">十一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">八月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">五月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">九月 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/11/19/2020-algorithms01/">数据结构和算法[1]</a>
          </li>
        
          <li>
            <a href="/2020/11/13/2020-arm/">由M1看ARM架构</a>
          </li>
        
          <li>
            <a href="/2020/08/20/2020-regex-list/">正则表达式速查表</a>
          </li>
        
          <li>
            <a href="/2020/01/01/2020-memory-taggedpointer/">OC中的Tagged Pointer</a>
          </li>
        
          <li>
            <a href="/2020/01/01/2020-memory-manage02/">iOS的内存布局</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2021 youzg<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>